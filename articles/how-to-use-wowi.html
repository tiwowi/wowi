<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Using wowi ‚Ä¢ wowi</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="‚Äùimage/svg+xml‚Äù" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="how-to-use-wowi_files/libs/quarto-html/popper.min.js"></script><script src="how-to-use-wowi_files/libs/quarto-html/tippy.umd.min.js"></script><link href="how-to-use-wowi_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="how-to-use-wowi_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using wowi">
<meta property="og:image" content="https://tiwowi.github.io/wowi/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">wowi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/how-to-use-wowi.html">Using wowi</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tiwowi/wowi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Using wowi</h1>

      <p class="author">Tom√°s Zaba</p>


      <small class="dont-index">Source: <a href="https://github.com/tiwowi/wowi/blob/main/vignettes/how-to-use-wowi.qmd" class="external-link"><code>vignettes/how-to-use-wowi.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <section class="level2"><h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Acute malnutrition remains a critical public health concern, particularly in fragile and humanitarian settings, often requiring targetted interventions. Its spatial distribution is often uneven, with clusters of elevated burden. Understanding where these unusual high-burden areas exist is crucial for effective planning, resource allocation, early warning systems, and timely response to alleviate the plight of the affected population.</p>
<p>In this article, you will learn how to use the <code>wowi</code> R package to understand the spatial distribution of acute malnutrition in your data set. Before we start with the walk through, it is important to have some critical concepts under your belt.</p>
<section class="level3"><h3 id="the-spatial-scan-approach">The spatial scan approach<a class="anchor" aria-label="anchor" href="#the-spatial-scan-approach"></a>
</h3>
<p>To identify statistically significant spatial clusters, analysts frequently rely on <a href="https://www.satscan.org" class="external-link"><code>SaTScan</code></a>, a powerful tool for spatial and spatio-temporal scan statistics. SaTScan‚Äôs <strong>Bernoulli model</strong> is particularly suited for binary outcomes such as:</p>
<ul>
<li>‚ÄúCase‚Äù = child is acutely malnourished</li>
<li>‚ÄúControl‚Äù = child is not acutely malnourished</li>
</ul>
<p>It evaluates whether observed clustering of cases exceeds what would be expected by chance <span class="citation" data-cites="satscan">Martin Kulldorff (<a href="#ref-satscan" role="doc-biblioref">July 2022</a>)</span>.</p>
</section><section class="level3"><h3 id="using-wowi-to-identify-spatial-clusters-of-high-rates-of-acute-malnutrition">Using <code>wowi</code> to identify spatial clusters of high rates of acute malnutrition<a class="anchor" aria-label="anchor" href="#using-wowi-to-identify-spatial-clusters-of-high-rates-of-acute-malnutrition"></a>
</h3>
<p>The <code>wowi</code> R package provides a tidy, reproducible interface for running Bernoulli spatial scan analysis via SaTScan. It depends on the <a href="https://cran.r-project.org/web/packages/rsatscan/index.html" class="external-link"><code>rsatscan</code></a> R package, which enables the use of <code>SaTScan</code> software from within R. While <code>rsatscan</code> offers general-purpose functionality, <code>wowi</code> was thoughtfully designed for acute malnutrition analysis.</p>
<section class="level4"><h4 id="what-outputs-does-wowi-provide">What outputs does <code>wowi</code> provide?<a class="anchor" aria-label="anchor" href="#what-outputs-does-wowi-provide"></a>
</h4>
<p>The package returns the standard set of outputs generated by SaTScan:</p>
<ol type="1">
<li>An interactive HTML map displaying the detected clusters. These can be opened with any web browser, and user can play with it - zoom in and out, click on the bubbles and see the statistics about the bubbles and more.</li>
<li>A text-based output with extension <code>.txt</code> containing the results.</li>
<li>Additional GIS-based files (e.g., shapefiles) that can be useful for further geospatial manipulation or integration into other mapping workflows.</li>
<li>Furthermore, it also returns a tidy table summarising the detected clusters, parsed from the text-based file described in point 2. This summary enables easier manipulation and integration into an analyst‚Äôs downstream workflow.</li>
</ol>
<div>
<blockquote>
<p><strong>Tip</strong></p>
<p>The output described in point 4 offers an IPC Acute Malnutrition-related insight for IPC users. It indicates whether the number of survey clusters or enumeration area IDs included in the detected cluster - and the total number of children - meet the IPC Acute Malnutrition criteria for disaggregated analysis, as recommended when the design effect exceeds 1.3 <span class="citation" data-cites="ipcmanual">(<a href="#ref-ipcmanual" role="doc-biblioref">IPC Global Partners 2021</a>)</span>. This information is given in the last column of the table with two possible values:</p>
<ul>
<li><p>‚Äúyes‚Äù ‚Äì the number of cluster IDs is ‚â• 5 and the number of children with valid measurements is ‚â• 100.</p></li>
<li><p>‚Äúno‚Äù ‚Äì the above criteria are not met.</p></li>
</ul>
</blockquote>
</div>
</section></section></section><section class="level2"><h2 id="from-data-to-clusters---the-wowi-analysis-workflow">From data to clusters - the wowi analysis workflow<a class="anchor" aria-label="anchor" href="#from-data-to-clusters---the-wowi-analysis-workflow"></a>
</h2>
<p>The analysis workflow with <code>wowi</code> begins with the standard anthropometric data processing steps - data wrangling and quality checks. For this purpose, wowi relies on the <a href="https://https://mphimo.github.io/mwana/" class="external-link"><code>mwana</code></a> package, which will be installed or updated automatically when you install <code>wowi</code>. Moreover, in the downstream analysis workflow, the <code>sf</code> package is required to generate shapefile-related outputs. Note that <a href="https://r-spatial.github.io/sf/" class="external-link"><code>sf</code></a> is not installed with wowi, therefore you must install it separately.</p>
<div>
<blockquote>
<p><strong>Note</strong></p>
<p><code>wowi</code> will not function unless the SaTScan software is installed on your machine. You can download it from: <a href="https://www.satscan.org" class="external-link uri">https://www.satscan.org</a>.</p>
<p>Once installed, copy the path to the SaTScan executable on your machine. This is needed for R to locate and run it.</p>
<p>We will now begin the walkthrough using the package‚Äôs built-in dataset, <code>anthro</code>.</p>
</blockquote>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">anthro</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 √ó 11</span></span>
<span><span class="co">#&gt;   district cluster   sex   age weight height oedema  muac     y     x precision</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Kotido        15     2  48.9   15.9  108.  n        128  2.93  34.1         8</span></span>
<span><span class="co">#&gt; 2 Kaabong      161     1  43.8   15    106.  n        128  3.65  34.1         4</span></span>
<span><span class="co">#&gt; 3 Kaabong      161     1  37.0   13.6   91.9 n        149 NA     NA          NA</span></span>
<span><span class="co">#&gt; 4 Kaabong      161     1  NA      7    100   n        150 NA     NA          NA</span></span>
<span><span class="co">#&gt; 5 Kaabong      160     1  22.5    8.6   74.2 n        119  3.65  34.1         4</span></span>
<span><span class="co">#&gt; 6 Kaabong      160     1  32.1   13.4   88.1 n        163 NA     NA          NA</span></span></code></pre></div>
</div>
<p>This is a SMART survey dataset that includes geographical coordinates - the <code>x</code> and <code>y</code> columns - along with the corresponding precision recorded in the <code>precision</code> column.</p>
<div>
<blockquote>
<p><strong>Note</strong></p>
<p><strong>Geographical coordinates are indispensable for spatial cluster detection</strong> ‚Äî without them, spatial analysis simply cannot be performed.</p>
</blockquote>
</div>
<section class="level3"><h3 id="data-wrangling">Data wrangling<a class="anchor" aria-label="anchor" href="#data-wrangling"></a>
</h3>
<p>You can scan for spatial clusters using acute malnutrition case definitions based on weight-for-height z-scores and/or oedema, mid-upper arm circumference (MUAC) and/or oedema, or a combined definition. The data wrangling workflow should be configured accordingly. In this article, we will demonstrate using the former.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va">anthro</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mw_wrangle_wfhz</span><span class="op">(</span></span>
<span>    sex <span class="op">=</span> <span class="va">sex</span>,</span>
<span>    weight <span class="op">=</span> <span class="va">weight</span>,</span>
<span>    height <span class="op">=</span> <span class="va">height</span>,</span>
<span>    .recode_sex <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">define_wasting</span><span class="op">(</span></span>
<span>    zscores <span class="op">=</span> <span class="va">wfhz</span>,</span>
<span>    oedema <span class="op">=</span> <span class="va">oedema</span>,</span>
<span>    .by <span class="op">=</span> <span class="st">"zscores"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span></span>
<span>    longitude <span class="op">=</span> <span class="va">y</span>,</span>
<span>    latitude <span class="op">=</span> <span class="va">x</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; ================================================================================</span></span></code></pre></div>
</div>
<p>Hereafter, you can check the quality of the data. Learn how to do so <a href="https://https://mphimo.github.io/mwana/articles/plausibility.html" class="external-link">here</a>.</p>
</section><section class="level3"><h3 id="running-the-spatial-scan">Running the spatial scan<a class="anchor" aria-label="anchor" href="#running-the-spatial-scan"></a>
</h3>
<p>This is handled by the <code><a href="../reference/ww_run_satscan.html">ww_run_satscan()</a></code> function. Read its full documentation by typing <code><a href="../reference/ww_run_satscan.html">?ww_run_satscan</a></code> in your console or by clicking <a href="https://tiwowi.github.io/wowi/reference/ww_run_satscan.html">here</a>.</p>
<p>You can run the analysis on either a single-area or a multiple-area dataset. We will begin with the former, followed by the latter.</p>
<section class="level4"><h4 id="single-area-dataset">Single-area dataset<a class="anchor" aria-label="anchor" href="#single-area-dataset"></a>
</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Filter out one district from the data set -----</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">district</span> <span class="op">==</span> <span class="st">"Kotido"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-4"><pre class="sourceCode r code-annotation-code code-annotated"><code class="sourceCode r"><span id="annotated-cell-4-1"><a href="#annotated-cell-4-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Load rsatscan ----</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="1" onclick="event.preventDefault();" href="">1</a><span id="annotated-cell-4-2" class="code-annotation-target"><a href="#annotated-cell-4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rsatscan)</span>
<span id="annotated-cell-4-3"><a href="#annotated-cell-4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-4-4"><a href="#annotated-cell-4-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Set up the parameters ----</span></span>
<span id="annotated-cell-4-5"><a href="#annotated-cell-4-5" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">ww_run_satscan</span>(</span>
<span id="annotated-cell-4-6"><a href="#annotated-cell-4-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">.data =</span> d,</span>
<span id="annotated-cell-4-7"><a href="#annotated-cell-4-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">filename =</span> <span class="st">"Kotido"</span>,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="2" onclick="event.preventDefault();" href="">2</a><span id="annotated-cell-4-8" class="code-annotation-target"><a href="#annotated-cell-4-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">dir =</span> directory,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="3" onclick="event.preventDefault();" href="">3</a><span id="annotated-cell-4-9" class="code-annotation-target"><a href="#annotated-cell-4-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">sslocation =</span> <span class="st">"/Applications/SaTScan.app/Contents/app"</span>,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="4" onclick="event.preventDefault();" href="">4</a><span id="annotated-cell-4-10" class="code-annotation-target"><a href="#annotated-cell-4-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">ssbatchfilename =</span> <span class="st">"satscan"</span>,</span>
<span id="annotated-cell-4-11"><a href="#annotated-cell-4-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">satscan_version =</span> <span class="st">"10.3.2"</span>,</span>
<span id="annotated-cell-4-12"><a href="#annotated-cell-4-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">.by_area =</span> <span class="cn">FALSE</span>,</span>
<span id="annotated-cell-4-13"><a href="#annotated-cell-4-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">.scan_for =</span> <span class="st">"high-low-rates"</span>,</span>
<span id="annotated-cell-4-14"><a href="#annotated-cell-4-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">.gam_based =</span> <span class="st">"wfhz"</span>,</span>
<span id="annotated-cell-4-15"><a href="#annotated-cell-4-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">area =</span> <span class="cn">NULL</span>,</span>
<span id="annotated-cell-4-16"><a href="#annotated-cell-4-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">latitude =</span> latitude,</span>
<span id="annotated-cell-4-17"><a href="#annotated-cell-4-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">longitude =</span> longitude,</span>
<span id="annotated-cell-4-18"><a href="#annotated-cell-4-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">cleanup =</span> <span class="cn">TRUE</span>,</span>
<span id="annotated-cell-4-19"><a href="#annotated-cell-4-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">verbose =</span> <span class="cn">FALSE</span></span>
<span id="annotated-cell-4-20"><a href="#annotated-cell-4-20" aria-hidden="true" tabindex="-1"></a>)</span><div class="code-annotation-gutter-bg"></div>
<div class="code-annotation-gutter"></div></code></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-4" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="2" data-code-annotation="1">Although you will never use the <code>rsatscan</code> package explicitly, you must make it available in your environment. This is because it creates a specific environment object - <code>ssenv</code>. If this is not loaded, <code>wowi</code> will not run.</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="8" data-code-annotation="2">Specify the folder in which you would like the output results of your analysis to be saved.</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="9" data-code-annotation="3">Provide the path to your SaTScan GUI installation. This varies depending on your operating system (OS). For macOS, it is typically ‚Äú/Applications/SaTScan.app/Contents/app‚Äù; for Windows, ‚ÄúC:/Program Files/SaTScan‚Äù.</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="10" data-code-annotation="4">Indicate the name of the SaTScan batch file. For macOS, use ‚Äúsatscan‚Äù; for Windows, use ‚ÄúSaTScanBatch64‚Äù.</span>
</dd>
</dl>
</div>
</div>
<section class="level5"><h5 id="getting-acquainted-with-the-files">Getting acquainted with the files<a class="anchor" aria-label="anchor" href="#getting-acquainted-with-the-files"></a>
</h5>
<p>The above code will generate seven files in the folder you specified using the <code>dir</code> argument. These files will share a common base name, as defined by the string provided in the <code>filename</code> argument.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#&gt; [1] "Kotido.cas"             "Kotido.clustermap.html" "Kotido.col.prj"</span></span>
<span><span class="co">#&gt; [4] "Kotido.ctl"             "Kotido.geo"             "Kotido.gis.prj"</span></span>
<span><span class="co">#&gt; [7] "Kotido.gis.shp"         "Kotido.gis.shx"         "Kotido.prm"</span></span></code></pre></div>
</div>
<ul>
<li>The <code>.cas</code>, <code>.ctl</code> and <code>.geo</code> files are SaTScan input datasets representing cases, controls and geographical coordinates, respectively.</li>
<li>The <code>.clustermap.html</code> file is an interactive HTML visualisation with an embedded Google Map displaying the detected clusters.</li>
<li>All other files are related to shapefiles and can be used for further GIS analysis and manipulation.</li>
</ul>
<p>Furthermore, we can view the results in a text-based format. To do this, we access the object to which we assigned the results of <code><a href="../reference/ww_run_satscan.html">ww_run_satscan()</a></code>. In our demo, this object is called results.</p>
<p>To see the text-based results, we use <code>results$.txt</code>. As this file is quite long, for the purposes of this demo we will only display the first 48 rows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#&gt;  [1] "                                 _____________________________"</span></span>
<span><span class="co">#&gt;  [2] ""</span></span>
<span><span class="co">#&gt;  [3] "                                        SaTScan v10.3.2"</span></span>
<span><span class="co">#&gt;  [4] "                                 _____________________________"</span></span>
<span><span class="co">#&gt;  [5] ""</span></span>
<span><span class="co">#&gt;  [6] "results"</span></span>
<span><span class="co">#&gt;  [7] ""</span></span>
<span><span class="co">#&gt;  [8] "Program run on: Sat Aug  2 16:20:17 2025"</span></span>
<span><span class="co">#&gt;  [9] ""</span></span>
<span><span class="co">#&gt; [10] "Purely Spatial analysis"</span></span>
<span><span class="co">#&gt; [11] "scanning for clusters with high or low rates"</span></span>
<span><span class="co">#&gt; [12] "using the Bernoulli model."</span></span>
<span><span class="co">#&gt; [13] "_______________________________________________________________________________________________"</span></span>
<span><span class="co">#&gt; [14] ""</span></span>
<span><span class="co">#&gt; [15] "SUMMARY OF DATA"</span></span>
<span><span class="co">#&gt; [16] ""</span></span>
<span><span class="co">#&gt; [17] "Study period.......................: 2025/08/02 to 2025/08/02"</span></span>
<span><span class="co">#&gt; [18] "Number of locations................: 36"</span></span>
<span><span class="co">#&gt; [19] "Total population...................: 333"</span></span>
<span><span class="co">#&gt; [20] "Total number of cases..............: 26"</span></span>
<span><span class="co">#&gt; [21] "Percent cases......................: 7.8"</span></span>
<span><span class="co">#&gt; [22] "_______________________________________________________________________________________________"</span></span>
<span><span class="co">#&gt; [23] ""</span></span>
<span><span class="co">#&gt; [24] "CLUSTERS DETECTED"</span></span>
<span><span class="co">#&gt; [25] ""</span></span>
<span><span class="co">#&gt; [26] "1.Location IDs included.: 10, 9"</span></span>
<span><span class="co">#&gt; [27] "  Coordinates / radius..: (34.113909 N, 3.087933 E) / 1.20 km"</span></span>
<span><span class="co">#&gt; [28] "  Span..................: 1.20 km"</span></span>
<span><span class="co">#&gt; [29] "  Population............: 25"</span></span>
<span><span class="co">#&gt; [30] "  Number of cases.......: 6"</span></span>
<span><span class="co">#&gt; [31] "  Expected cases........: 1.95"</span></span>
<span><span class="co">#&gt; [32] "  Observed / expected...: 3.07"</span></span>
<span><span class="co">#&gt; [33] "  Relative risk.........: 3.70"</span></span>
<span><span class="co">#&gt; [34] "  Percent cases in area.: 24.0"</span></span>
<span><span class="co">#&gt; [35] "  Log likelihood ratio..: 3.458213"</span></span>
<span><span class="co">#&gt; [36] "  P-value...............: 0.55"</span></span>
<span><span class="co">#&gt; [37] ""</span></span>
<span><span class="co">#&gt; [38] "2.Location IDs included.: 2, 3, 1"</span></span>
<span><span class="co">#&gt; [39] "  Coordinates / radius..: (33.930353 N, 3.172303 E) / 4.00 km"</span></span>
<span><span class="co">#&gt; [40] "  Span..................: 5.88 km"</span></span>
<span><span class="co">#&gt; [41] "  Population............: 35"</span></span>
<span><span class="co">#&gt; [42] "  Number of cases.......: 0"</span></span>
<span><span class="co">#&gt; [43] "  Expected cases........: 2.73"</span></span>
<span><span class="co">#&gt; [44] "  Observed / expected...: 0"</span></span>
<span><span class="co">#&gt; [45] "  Relative risk.........: 0"</span></span>
<span><span class="co">#&gt; [46] "  Percent cases in area.: 0"</span></span>
<span><span class="co">#&gt; [47] "  Log likelihood ratio..: 3.013494"</span></span>
<span><span class="co">#&gt; [48] "  P-value...............: 0.68"</span></span></code></pre></div>
</div>
<p>This file isn‚Äôt very convenient if we want to perform further manipulation. Don‚Äôt worry ‚Äî <code><a href="../reference/ww_run_satscan.html">ww_run_satscan()</a></code> has got you covered ‚òÇÔ∏è. It parses the text-based results into a tidy table that you can easily work with üòé. To access it, simply subset the results object like this: <code>results$.df</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## # A tibble: 2 √ó 18</span></span>
<span><span class="co">##  survey_area nr_EAs total_children total_cases `%_cases` location_ids   geo   radius span  children n_cases expected_cases observedExpected relative_risk</span></span>
<span><span class="co">##  &lt;chr&gt;        &lt;int&gt;          &lt;int&gt;       &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;    &lt;int&gt;   &lt;int&gt;          &lt;dbl&gt;            &lt;dbl&gt;         &lt;dbl&gt;</span></span>
<span><span class="co">## 1 District        36            532         104        19 23,24,26,25,3‚Ä¶ 13.6‚Ä¶ 1.43 ‚Ä¶ 1.88‚Ä¶      170       4           33.2             0.12         0.085</span></span>
<span><span class="co">## 2 District        36            532         104        19 16,20,14,12,1‚Ä¶ 13.8‚Ä¶ 26.24‚Ä¶ 43.5‚Ä¶      258      84           50.4             1.67         4.46</span></span>
<span><span class="co">## # ‚Ñπ 4 more variables: `%_cases_in_area` &lt;dbl&gt;, log_lik_ratio &lt;dbl&gt;, pvalue &lt;dbl&gt;, ipc_amn &lt;chr&gt;</span></span></code></pre></div>
</div>
</section></section><section class="level4"><h4 id="multiple-area-data-set">Multiple-area data set<a class="anchor" aria-label="anchor" href="#multiple-area-data-set"></a>
</h4>
<p>We use a dataset containing multiple areas. In our example dataset, there are several districts, so we want to run the spatial scan for each district in the dataset. To do this, we set the <code>filename</code> argument to <code>NULL</code>, then set <code>.by_area = TRUE</code>, and finally specify the column in our dataset that stores the areas - <code>district</code> - in our example.</p>
<p>For this demo, we will filter out just two districts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Filter out two districts -----</span></span>
<span><span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">district</span> <span class="op">==</span> <span class="st">"Kotido"</span> <span class="op">|</span> <span class="va">district</span> <span class="op">==</span> <span class="st">"Abim"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Set up the parameters ----</span></span>
<span><span class="va">multiple_area</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ww_run_satscan.html">ww_run_satscan</a></span><span class="op">(</span></span>
<span>  .data <span class="op">=</span> <span class="va">ds</span>,</span>
<span>  filename <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dir <span class="op">=</span> <span class="va">directory</span>,</span>
<span>  sslocation <span class="op">=</span> <span class="st">"/Applications/SaTScan.app/Contents/app"</span>,</span>
<span>  ssbatchfilename <span class="op">=</span> <span class="st">"satscan"</span>,</span>
<span>  satscan_version <span class="op">=</span> <span class="st">"10.3.2"</span>,</span>
<span>  .by_area <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  .scan_for <span class="op">=</span> <span class="st">"high-low-rates"</span>,</span>
<span>  .gam_based <span class="op">=</span> <span class="st">"wfhz"</span>,</span>
<span>  latitude <span class="op">=</span> <span class="va">latitude</span>,</span>
<span>  longitude <span class="op">=</span> <span class="va">longitude</span>,</span>
<span>  area <span class="op">=</span> <span class="va">district</span>,</span>
<span>  cleanup <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<p>This returns the following outputs:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#&gt;  [1] "Abim.cas"               "Abim.clustermap.html"   "Abim.col.prj"</span></span>
<span><span class="co">#&gt;  [4] "Abim.ctl"               "Abim.geo"               "Abim.gis.prj"</span></span>
<span><span class="co">#&gt;  [7] "Abim.gis.shp"           "Abim.gis.shx"           "Abim.prm"</span></span>
<span><span class="co">#&gt; [10] "Kotido.cas"             "Kotido.clustermap.html" "Kotido.col.prj"</span></span>
<span><span class="co">#&gt; [13] "Kotido.ctl"             "Kotido.geo"             "Kotido.gis.prj"</span></span>
<span><span class="co">#&gt; [16] "Kotido.gis.shp"         "Kotido.gis.shx"         "Kotido.prm"</span></span></code></pre></div>
</div>
<p>We can also obtain the tidy table:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#&gt; # A tibble: 8 √ó 19</span></span>
<span><span class="co">#&gt;   survey_area nr_EAs total_children total_cases `%_cases` location_ids     geo</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;        &lt;int&gt;          &lt;int&gt;       &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 Kotido          36            333          26         7 10,9             34.1‚Ä¶</span></span>
<span><span class="co">#&gt; 2 Kotido          36            333          26         7 2,3,1            33.9‚Ä¶</span></span>
<span><span class="co">#&gt; 3 Kotido          36            333          26         7 15               34.1‚Ä¶</span></span>
<span><span class="co">#&gt; 4 Kotido          36            333          26         7 28,30            34.0‚Ä¶</span></span>
<span><span class="co">#&gt; 5 Abim            31            223          15         6 111,116,117,112‚Ä¶ 33.6‚Ä¶</span></span>
<span><span class="co">#&gt; 6 Abim            31            223          15         6 135,136,137,133  33.9‚Ä¶</span></span>
<span><span class="co">#&gt; 7 Abim            31            223          15         6 127,129,128,130  33.8‚Ä¶</span></span>
<span><span class="co">#&gt; 8 Abim            31            223          15         6 126,143,131      33.7‚Ä¶</span></span>
<span><span class="co">#&gt; # ‚Ñπ 12 more variables: radius &lt;chr&gt;, span &lt;chr&gt;, children &lt;int&gt;, n_cases &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   expected_cases &lt;dbl&gt;, observedExpected &lt;dbl&gt;, relative_risk &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   `%_cases_in_area` &lt;dbl&gt;, log_lik_ratio &lt;dbl&gt;, pvalue &lt;dbl&gt;, ipc_amn &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   area &lt;chr&gt;</span></span></code></pre></div>
</div>
</section></section></section><section class="level2 unnumbered"><h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-ipcmanual" class="csl-entry" role="listitem">
IPC Global Partners. 2021. <em>Integrated Food Security Phase Classification Technical Manual Version 3.1: Evidence and Standards for Better Food Security and Nutrition Decisions</em>. <a href="https://www.ipcinfo.org/ipcinfo-website/resources/ipc-manual/en/" class="external-link">https://www.ipcinfo.org/ipcinfo-website/resources/ipc-manual/en/</a>.
</div>
<div id="ref-satscan" class="csl-entry" role="listitem">
Martin Kulldorff. July 2022. <em>SaTScan User Guide for Version 10.1</em>. SaTScan Software for the spatial, temporal; space-time scan statistics. <a href="http://www.satscan.org/" class="external-link">http://www.satscan.org/</a>.
</div>
</div>
</section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tom√°s Zaba.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
